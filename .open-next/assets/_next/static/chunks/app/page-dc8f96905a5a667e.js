(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5152:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>aS});var t,r,o,n,i,l=s(5155),c=s(2115);let d="personalization-customizations",u={isEditMode:!1,selectedElement:null,customizations:{},history:[{}],historyIndex:0};function m(e,a){switch(a.type){case"SET_EDIT_MODE":return{...e,isEditMode:"boolean"==typeof a.payload&&a.payload,selectedElement:"boolean"==typeof a.payload&&a.payload?e.selectedElement:null};case"SELECT_ELEMENT":return{...e,selectedElement:a.payload&&"object"==typeof a.payload&&"elementId"in a.payload?a.payload:null};case"UPDATE_PROPERTY":{if(!a.payload||"object"!=typeof a.payload||!("elementId"in a.payload))return e;let{elementId:s,propertyId:t,value:r}=a.payload,o={...e.customizations,[s]:{...e.customizations[s]||{},[t]:r}},n=e.history.slice(0,e.historyIndex+1);return n.push(o),{...e,customizations:o,history:n,historyIndex:n.length-1}}case"UNDO":if(e.historyIndex>0){let a=e.historyIndex-1;return{...e,customizations:e.history[a],historyIndex:a}}return e;case"REDO":if(e.historyIndex<e.history.length-1){let a=e.historyIndex+1;return{...e,customizations:e.history[a],historyIndex:a}}return e;case"RESET":return{...e,customizations:{},history:[{}],historyIndex:0,selectedElement:null};case"LOAD_CUSTOMIZATIONS":{let s=!a.payload||"object"!=typeof a.payload||"elementId"in a.payload?{}:a.payload;return{...e,customizations:s,history:[s],historyIndex:0}}default:return e}}let p=(0,c.createContext)(null);function x(e){let{children:a}=e,[s,t]=(0,c.useReducer)(m,u);(0,c.useEffect)(()=>{!async function(){try{let e=await fetch("/api/personalizations");if(e.ok){let a=await e.json();t({type:"LOAD_CUSTOMIZATIONS",payload:a.customizations})}else{let e=localStorage.getItem(d);if(e){let a=JSON.parse(e);t({type:"LOAD_CUSTOMIZATIONS",payload:a})}}}catch(e){console.error("Failed to load customizations from server:",e);try{let e=localStorage.getItem(d);if(e){let a=JSON.parse(e);t({type:"LOAD_CUSTOMIZATIONS",payload:a})}}catch(e){console.error("Failed to load customizations from localStorage:",e)}}}()},[]);let r=(0,c.useCallback)(e=>{t({type:"SET_EDIT_MODE",payload:e})},[]),o=(0,c.useCallback)(e=>{t({type:"SELECT_ELEMENT",payload:e})},[]),n=(0,c.useCallback)((e,a,s)=>{t({type:"UPDATE_PROPERTY",payload:{elementId:e,propertyId:a,value:s}})},[]),i=(0,c.useCallback)(()=>{t({type:"UNDO"})},[]),x=(0,c.useCallback)(()=>{t({type:"REDO"})},[]),h=(0,c.useCallback)(async()=>{t({type:"RESET"});try{await fetch("/api/personalizations",{method:"DELETE"}),localStorage.removeItem(d)}catch(e){console.error("Failed to clear customizations from server:",e);try{localStorage.removeItem(d)}catch(e){console.error("Failed to clear customizations from localStorage:",e)}}},[]),g=(0,c.useCallback)(async()=>{try{if(!(await fetch("/api/personalizations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customizations:s.customizations})})).ok)throw Error("Server save failed");localStorage.setItem(d,JSON.stringify(s.customizations))}catch(e){console.error("Failed to save customizations to server:",e);try{localStorage.setItem(d,JSON.stringify(s.customizations))}catch(e){console.error("Failed to save customizations to localStorage:",e)}}},[s.customizations]),f=(0,c.useCallback)((e,a,t)=>{var r;let o=null==(r=s.customizations[e])?void 0:r[a];return void 0!==o?o:t},[s.customizations]);return(0,l.jsx)(p.Provider,{value:{state:s,setEditMode:r,selectElement:o,updateProperty:n,undo:i,redo:x,reset:h,saveCustomizations:g,getCustomization:f},children:a})}function h(){let e=(0,c.useContext)(p);if(!e)throw Error("usePersonalization must be used within PersonalizationProvider");return e}var g=s(2467),f=s(3101),b=s(2821),v=s(5889);function j(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,v.QP)((0,b.$)(a))}let N=(0,f.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function y(e){let{className:a,variant:s,size:t,asChild:r=!1,...o}=e,n=r?g.DX:"button";return(0,l.jsx)(n,{"data-slot":"button",className:j(N({variant:s,size:t,className:a})),...o})}var w=s(574);function C(e){let{className:a,...s}=e;return(0,l.jsx)(w.bL,{"data-slot":"tabs",className:j("flex flex-col gap-2",a),...s})}function k(e){let{className:a,...s}=e;return(0,l.jsx)(w.B8,{"data-slot":"tabs-list",className:j("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...s})}function z(e){let{className:a,...s}=e;return(0,l.jsx)(w.l9,{"data-slot":"tabs-trigger",className:j("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...s})}function S(e){let{className:a,...s}=e;return(0,l.jsx)(w.UC,{"data-slot":"tabs-content",className:j("flex-1 outline-none",a),...s})}let I=(0,f.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function _(e){let{className:a,variant:s,asChild:t=!1,...r}=e,o=t?g.DX:"span";return(0,l.jsx)(o,{"data-slot":"badge",className:j(I({variant:s}),a),...r})}function E(e){let{className:a,...s}=e;return(0,l.jsx)("div",{"data-slot":"card",className:j("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...s})}function L(e){let{className:a,...s}=e;return(0,l.jsx)("div",{"data-slot":"card-header",className:j("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...s})}function P(e){let{className:a,...s}=e;return(0,l.jsx)("div",{"data-slot":"card-title",className:j("leading-none font-semibold",a),...s})}function D(e){let{className:a,...s}=e;return(0,l.jsx)("div",{"data-slot":"card-description",className:j("text-muted-foreground text-sm",a),...s})}function A(e){let{className:a,...s}=e;return(0,l.jsx)("div",{"data-slot":"card-content",className:j("px-6",a),...s})}var F=s(4531),R=s(7264),T=s(8103),U=s(9338);function O(e){let{isLoading:a,partnerName:s,apiUsage:t,stats:r,coupons:o}=e,n=o.filter(e=>1===e.status),i=o.filter(e=>1!==e.status),c=o.length,d=o.reduce((e,a)=>e+(a.vistosx||0),0),u=o.reduce((e,a)=>e+(a.scan||0),0),m=o.reduce((e,a)=>e+(a.usado||0),0),p=e=>{if(0!==o.length)return o.reduce((a,s)=>{var t;return s[e]>(null!=(t=null==a?void 0:a[e])?t:-1/0)?s:a},o[0])},x=[{title:"Cupones del partner",value:c,helper:"".concat(n.length," activos / ").concat(i.length," inactivos"),icon:F.v,color:"text-blue-600"},{title:"Vistas acumuladas",value:d,helper:"".concat((c>0?d/c:0).toFixed(2)," en promedio"),icon:R.k,color:"text-primary"},{title:"Escaneos",value:u,helper:"".concat(m," usos reportados"),icon:T.z,color:"text-green-600"},{title:"Promedio general",value:(c>0?u/c:0).toFixed(2),helper:"Actividad media por cup\xf3n",icon:U.N,color:"text-purple-600"}],h=[{label:"M\xe1s visto",coupon:p("vistosx"),valueLabel:e=>{var a;return"".concat(null!=(a=null==e?void 0:e.vistosx)?a:0," vistas")}},{label:"M\xe1s escaneado",coupon:p("scan"),valueLabel:e=>{var a;return"".concat(null!=(a=null==e?void 0:e.scan)?a:0," escaneos")}},{label:"M\xe1s usado",coupon:p("usado"),valueLabel:e=>{var a;return"".concat(null!=(a=null==e?void 0:e.usado)?a:0," usos")}}];return(0,l.jsxs)("div",{className:"space-y-6",children:[a&&!r?(0,l.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((e,a)=>(0,l.jsx)(E,{className:"animate-pulse",children:(0,l.jsxs)(L,{className:"space-y-2",children:[(0,l.jsx)(P,{className:"h-4 bg-muted rounded"}),(0,l.jsx)("div",{className:"h-8 bg-muted rounded"}),(0,l.jsx)("div",{className:"h-3 bg-muted rounded w-3/4"})]})},a))}):(0,l.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:x.map(e=>{let a=e.icon;return(0,l.jsxs)(E,{children:[(0,l.jsxs)(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(P,{className:"text-sm font-medium",children:e.title}),(0,l.jsx)(a,{className:"w-5 h-5 ".concat(e.color),weight:"duotone"})]}),(0,l.jsxs)(A,{children:[(0,l.jsx)("div",{className:"text-3xl font-bold",children:e.value}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e.helper})]})]},e.title)})}),(0,l.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[2fr_1fr]",children:[(0,l.jsxs)(E,{children:[(0,l.jsxs)(L,{children:[(0,l.jsxs)(P,{children:["Destacados para ",s]}),(0,l.jsx)(D,{children:"Datos consolidados directamente desde Routicket"})]}),(0,l.jsx)(A,{children:(0,l.jsx)("div",{className:"grid gap-4 md:grid-cols-3",children:h.map(e=>{let{label:a,coupon:s,valueLabel:t}=e;return s&&(0!==s.vistosx||0!==s.scan||0!==s.usado)?(0,l.jsxs)("div",{className:"rounded-lg border bg-card p-4 space-y-3",children:[(0,l.jsx)("div",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:a}),(0,l.jsx)("img",{src:s.foto,alt:s.titulo,className:"h-24 w-full rounded-md object-cover"}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("p",{className:"font-semibold text-sm leading-tight",children:s.titulo}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:t(s)})]})]},a):(0,l.jsxs)("div",{className:"rounded-lg border bg-muted/40 p-4 text-center text-sm text-muted-foreground",children:[(0,l.jsx)("p",{className:"font-medium mb-2",children:a}),(0,l.jsx)("p",{children:"Sin datos disponibles"})]},a)})})})]}),(0,l.jsxs)(E,{children:[(0,l.jsxs)(L,{children:[(0,l.jsx)(P,{children:"Uso de la API"}),(0,l.jsx)(D,{children:"Informaci\xf3n en tiempo real"})]}),(0,l.jsx)(A,{className:"space-y-3 text-sm",children:t?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"Clave p\xfablica"}),(0,l.jsx)("span",{className:"font-mono text-xs",children:t.api_public})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"Llamadas actuales"}),(0,l.jsx)("span",{className:"font-semibold",children:t.contador})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"Llamadas previas"}),(0,l.jsx)("span",{children:t.contador_prev})]}),r&&(0,l.jsxs)("div",{className:"space-y-2 pt-2 text-xs",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-muted-foreground",children:[(0,l.jsx)("span",{children:"Registros totales API"}),(0,l.jsx)("span",{className:"font-medium text-foreground",children:r.records})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-muted-foreground",children:[(0,l.jsx)("span",{children:"Bytes transferidos"}),(0,l.jsxs)("span",{className:"font-medium text-foreground",children:[r.data_kb," KB"]})]})]}),(0,l.jsx)("div",{className:"rounded-md bg-muted/50 p-3 text-xs text-muted-foreground",children:t.note}),r&&(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-muted-foreground",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"block text-[11px] uppercase",children:"Vistas (API)"}),(0,l.jsx)("span",{className:"font-semibold text-foreground",children:r.totals.vistosx})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"block text-[11px] uppercase",children:"Escaneos (API)"}),(0,l.jsx)("span",{className:"font-semibold text-foreground",children:r.totals.scan})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"block text-[11px] uppercase",children:"Likes (API)"}),(0,l.jsx)("span",{className:"font-semibold text-foreground",children:r.totals.mg})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"block text-[11px] uppercase",children:"Comentarios (API)"}),(0,l.jsx)("span",{className:"font-semibold text-foreground",children:r.totals.comentarios})]})]})]}):(0,l.jsx)("p",{className:"text-muted-foreground",children:"Sin informaci\xf3n de uso disponible."})})]})]})]})}var B=s(7908),M=s(9352),V=s(4350);let H=new Intl.NumberFormat("es-MX"),X=e=>{if(!e)return"—";let a=e.includes(" "),s=new Date(e);return Number.isNaN(s.getTime())?e:new Intl.DateTimeFormat("es-MX",{dateStyle:"medium",...a?{timeStyle:"short"}:{}}).format(s)};function q(e){var a,s,t,r,o,n,i,c,d,u,m;let{isLoading:p,stats:x,coupons:h}=e,g=null!=(a=null==x?void 0:x.records)?a:h.length,f=null!=(s=null==x?void 0:x.totals.vistosx)?s:h.reduce((e,a)=>e+(a.vistosx||0),0),b=null!=(t=null==x?void 0:x.totals.scan)?t:h.reduce((e,a)=>e+(a.scan||0),0),v=null!=(r=null==x?void 0:x.averages.vistosx)?r:h.length>0?f/h.length:0,j=null!=(o=null==x?void 0:x.averages.scan)?o:h.length>0?b/h.length:0,N=Object.entries(null!=(n=null==x?void 0:x.by_status)?n:{}).map(e=>{let[a,s]=e;return{status:a,count:s}}),y=Object.entries(null!=(i=null==x?void 0:x.by_tipo)?i:{}).map(e=>{let[a,s]=e;return{tipo:a,count:s}}),w=null==x?void 0:x.totals,C=null==x?void 0:x.dates;return x||p?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-3xl font-bold tracking-tight mb-2",children:"Anal\xedtica del Partner"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"Visualiza el rendimiento agregado de los cupones con la informaci\xf3n provista por Routicket."})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,l.jsxs)(E,{children:[(0,l.jsxs)(L,{className:"space-y-1 pb-2",children:[(0,l.jsx)(P,{className:"text-sm font-medium",children:"Registros totales"}),(0,l.jsx)(U.N,{className:"w-5 h-5 text-primary",weight:"duotone"})]}),(0,l.jsxs)(A,{children:[(0,l.jsx)("div",{className:"text-3xl font-bold",children:H.format(g)}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Cupones recuperados desde la API"})]})]}),(0,l.jsxs)(E,{children:[(0,l.jsxs)(L,{className:"space-y-1 pb-2",children:[(0,l.jsx)(P,{className:"text-sm font-medium",children:"Vistas acumuladas"}),(0,l.jsx)(B._,{className:"w-5 h-5 text-blue-600",weight:"duotone"})]}),(0,l.jsxs)(A,{children:[(0,l.jsx)("div",{className:"text-3xl font-bold",children:H.format(f)}),(0,l.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Promedio ",v.toFixed(2)," por cup\xf3n"]})]})]}),(0,l.jsxs)(E,{children:[(0,l.jsxs)(L,{className:"space-y-1 pb-2",children:[(0,l.jsx)(P,{className:"text-sm font-medium",children:"Escaneos registrados"}),(0,l.jsx)(M.y,{className:"w-5 h-5 text-green-600",weight:"duotone"})]}),(0,l.jsxs)(A,{children:[(0,l.jsx)("div",{className:"text-3xl font-bold",children:H.format(b)}),(0,l.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Promedio ",j.toFixed(2)," por cup\xf3n"]})]})]}),(0,l.jsxs)(E,{children:[(0,l.jsxs)(L,{className:"space-y-1 pb-2",children:[(0,l.jsx)(P,{className:"text-sm font-medium",children:"Reacciones"}),(0,l.jsx)(U.N,{className:"w-5 h-5 text-purple-600",weight:"duotone"})]}),(0,l.jsxs)(A,{children:[(0,l.jsx)("div",{className:"text-3xl font-bold",children:H.format(null!=(c=null==w?void 0:w.mg)?c:0)}),(0,l.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Comentarios: ",H.format(null!=(d=null==w?void 0:w.comentarios)?d:0)]})]})]})]}),(0,l.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[2fr_1fr]",children:[(0,l.jsxs)(E,{children:[(0,l.jsxs)(L,{children:[(0,l.jsx)(P,{children:"Distribuci\xf3n por estado"}),(0,l.jsx)(D,{children:"Cupones activos vs. inactivos"})]}),(0,l.jsxs)(A,{className:"space-y-4",children:[0===N.length&&(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sin datos de estado disponibles."}),N.map(e=>{let{status:a,count:s}=e,t=g>0?Number(s)/g*100:0;return(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsx)("span",{className:"font-medium",children:"1"===a?"Activos":"Inactivos"}),(0,l.jsxs)("span",{className:"text-muted-foreground",children:[H.format(s)," (",t.toFixed(1),"%)"]})]}),(0,l.jsx)("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-primary rounded-full",style:{width:"".concat(t,"%")}})})]},a)})]})]}),(0,l.jsxs)(E,{children:[(0,l.jsxs)(L,{children:[(0,l.jsx)(P,{children:"Fechas relevantes"}),(0,l.jsx)(D,{children:"Rango de vigencia global"})]}),(0,l.jsxs)(A,{className:"space-y-3 text-sm",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"Primera fecha de inicio"}),(0,l.jsx)("span",{children:X(null==C?void 0:C.min_fecha_inicio)})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"\xdaltima fecha de fin"}),(0,l.jsx)("span",{children:X(null==C?void 0:C.max_fecha_final)})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"Primer registro"}),(0,l.jsx)("span",{children:X(null==C?void 0:C.min_fecha_create)})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"\xdaltimo registro"}),(0,l.jsx)("span",{children:X(null==C?void 0:C.max_fecha_create)})]}),(0,l.jsxs)("p",{className:"flex items-center gap-2 pt-1 text-xs text-muted-foreground",children:[(0,l.jsx)(V.V,{className:"w-4 h-4"}),"Las fechas se muestran tal como las expone la API, ajustadas al huso horario del navegador."]})]})]})]}),(0,l.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[1fr_1fr]",children:[(0,l.jsxs)(E,{children:[(0,l.jsxs)(L,{children:[(0,l.jsx)(P,{children:"Actividad por tipo"}),(0,l.jsx)(D,{children:"Clasificaci\xf3n directa desde Routicket"})]}),(0,l.jsxs)(A,{className:"space-y-4",children:[0===y.length&&(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sin datos de tipo disponibles."}),y.map(e=>{let{tipo:a,count:s}=e,t=g>0?Number(s)/g*100:0;return(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsx)("span",{className:"font-medium",children:"0"===a?"Cup\xf3n":a}),(0,l.jsxs)("span",{className:"text-muted-foreground",children:[H.format(s)," (",t.toFixed(1),"%)"]})]}),(0,l.jsx)("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-secondary rounded-full",style:{width:"".concat(t,"%")}})})]},a)})]})]}),(0,l.jsxs)(E,{children:[(0,l.jsxs)(L,{children:[(0,l.jsx)(P,{children:"Promedios vs. totales"}),(0,l.jsx)(D,{children:"Comparativa r\xe1pida de interacci\xf3n"})]}),(0,l.jsxs)(A,{className:"space-y-3 text-sm",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{className:"rounded-lg border bg-muted/40 p-3",children:[(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Promedio vistas"}),(0,l.jsx)("p",{className:"text-lg font-semibold",children:v.toFixed(2)})]}),(0,l.jsxs)("div",{className:"rounded-lg border bg-muted/40 p-3",children:[(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Promedio escaneos"}),(0,l.jsx)("p",{className:"text-lg font-semibold",children:j.toFixed(2)})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{className:"rounded-lg border bg-card p-3",children:[(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Usos reportados"}),(0,l.jsx)("p",{className:"text-lg font-semibold",children:H.format(null!=(u=null==w?void 0:w.usado)?u:0)})]}),(0,l.jsxs)("div",{className:"rounded-lg border bg-card p-3",children:[(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Comentarios"}),(0,l.jsx)("p",{className:"text-lg font-semibold",children:H.format(null!=(m=null==w?void 0:w.comentarios)?m:0)})]})]}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Valores calculados en base a los datos agregados de la respuesta. Para granularidad adicional se requiere acceso a endpoints espec\xedficos de canjes."})]})]})]})]}):(0,l.jsx)(E,{children:(0,l.jsxs)(L,{children:[(0,l.jsx)(P,{children:"No hay datos de anal\xedtica disponibles"}),(0,l.jsx)(D,{children:"Sincroniza nuevamente para mostrar la informaci\xf3n del API."})]})})}var G=s(842),J=s(6551);let Y=new Intl.NumberFormat("es-MX"),W=e=>{if(!e)return"—";let a=e.includes(" "),s=new Date(e);return Number.isNaN(s.getTime())?e:new Intl.DateTimeFormat("es-MX",{dateStyle:"medium",...a?{timeStyle:"short"}:{}}).format(s)};function $(e){let{isLoading:a,coupons:s}=e,[t,r]=(0,c.useState)("all"),o=(0,c.useMemo)(()=>"all"===t?s:"active"===t?s.filter(e=>1===e.status):s.filter(e=>1!==e.status),[s,t]),n=(0,l.jsx)("div",{className:"grid gap-4",children:Array.from({length:3}).map((e,a)=>(0,l.jsx)(E,{className:"animate-pulse",children:(0,l.jsxs)(A,{className:"p-6 space-y-4",children:[(0,l.jsx)("div",{className:"h-4 w-1/3 bg-muted rounded"}),(0,l.jsx)("div",{className:"h-5 w-2/3 bg-muted rounded"}),(0,l.jsx)("div",{className:"h-24 bg-muted rounded"})]})},a))});return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Cupones sincronizados"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"Vista consolidada de los cupones que la API devolvi\xf3 para el partner seleccionado. No se permite edici\xf3n desde esta vista."})]}),(0,l.jsxs)("div",{className:"inline-flex rounded-md border bg-background p-1 text-sm",children:[(0,l.jsxs)(y,{variant:"all"===t?"default":"ghost",size:"sm",onClick:()=>r("all"),children:["Todos (",s.length,")"]}),(0,l.jsxs)(y,{variant:"active"===t?"default":"ghost",size:"sm",onClick:()=>r("active"),children:["Activos (",s.filter(e=>1===e.status).length,")"]}),(0,l.jsxs)(y,{variant:"inactive"===t?"default":"ghost",size:"sm",onClick:()=>r("inactive"),children:["Inactivos (",s.filter(e=>1!==e.status).length,")"]})]})]}),a?n:0===o.length?(0,l.jsx)(E,{children:(0,l.jsxs)(A,{className:"py-12 text-center text-muted-foreground",children:[(0,l.jsx)(G.z,{className:"w-12 h-12 mx-auto mb-4",weight:"duotone"}),(0,l.jsx)("h3",{className:"text-lg font-semibold mb-1",children:"No se encontraron cupones"}),(0,l.jsx)("p",{className:"text-sm",children:"Prueba cambiando el filtro o vuelve a sincronizar la informaci\xf3n."})]})}):(0,l.jsx)("div",{className:"grid gap-4",children:o.map(e=>{var a,s,t,r;let o=1===e.status,n=(()=>{let a=new URL("https://routicket.com/cupones/infoCupon.php");return a.searchParams.set("id_cupon",String(e.id)),a.toString()})();return(0,l.jsx)(E,{children:(0,l.jsx)(A,{className:"p-6 space-y-4",children:(0,l.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-start",children:[(0,l.jsx)("img",{src:e.foto,alt:e.titulo,className:"h-32 w-32 rounded-lg object-cover"}),(0,l.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,l.jsx)(_,{variant:o?"default":"secondary",children:o?"Activo":"Inactivo"}),(0,l.jsxs)(_,{variant:"outline",children:["ID #",e.id]}),(0,l.jsxs)(_,{variant:"outline",children:["Partner ",e.id_partner]}),0!==e.id_empresa&&(0,l.jsxs)(_,{variant:"outline",children:["Empresa ",e.id_empresa]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-xl font-semibold leading-tight",children:e.titulo}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.descripcion||e.condiciones})]}),(0,l.jsxs)("div",{className:"grid gap-3 md:grid-cols-3 text-sm",children:[(0,l.jsxs)("div",{className:"rounded border bg-muted/40 p-3",children:[(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Vigencia"}),(0,l.jsxs)("p",{className:"font-medium",children:[W(e.fecha_inicio)," → ",W(e.fecha_final)]})]}),(0,l.jsxs)("div",{className:"rounded border bg-muted/40 p-3 flex items-center gap-2",children:[(0,l.jsx)(R.k,{className:"w-4 h-4 text-primary"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Vistas"}),(0,l.jsx)("p",{className:"font-semibold",children:Y.format(null!=(a=e.vistosx)?a:0)})]})]}),(0,l.jsxs)("div",{className:"rounded border bg-muted/40 p-3 flex items-center gap-2",children:[(0,l.jsx)(M.y,{className:"w-4 h-4 text-green-600"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Escaneos"}),(0,l.jsx)("p",{className:"font-semibold",children:Y.format(null!=(s=e.scan)?s:0)})]})]})]}),(0,l.jsxs)("div",{className:"rounded-lg border bg-card/60 p-3 text-sm",children:[(0,l.jsx)("p",{className:"text-xs uppercase tracking-wide text-muted-foreground mb-1",children:"Condiciones"}),(0,l.jsx)("p",{children:e.condiciones||"Sin restricciones adicionales registradas."})]}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[n&&(0,l.jsx)(y,{asChild:!0,variant:"outline",size:"sm",className:"gap-2",children:(0,l.jsxs)("a",{href:n,target:"_blank",rel:"noopener noreferrer",children:["Ver en Routicket",(0,l.jsx)(J.B,{className:"w-4 h-4"})]})}),e.url_tienda&&"0"!==e.url_tienda&&(0,l.jsx)(y,{asChild:!0,variant:"ghost",size:"sm",className:"gap-2",children:(0,l.jsxs)("a",{href:e.url_tienda,target:"_blank",rel:"noopener noreferrer",children:["Sitio del negocio",(0,l.jsx)(J.B,{className:"w-4 h-4"})]})})]}),(0,l.jsxs)("div",{className:"grid gap-3 md:grid-cols-4 text-xs text-muted-foreground",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"block text-[11px] uppercase",children:"Likes"}),(0,l.jsx)("span",{className:"font-semibold text-sm text-foreground",children:Y.format(null!=(t=e.mg)?t:0)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"block text-[11px] uppercase",children:"Comentarios"}),(0,l.jsx)("span",{className:"font-semibold text-sm text-foreground",children:Y.format(null!=(r=e.comentarios)?r:0)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"block text-[11px] uppercase",children:"C\xf3digo"}),(0,l.jsx)("span",{className:"font-semibold text-sm text-foreground",children:e.code||"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"block text-[11px] uppercase",children:"Creado el"}),(0,l.jsx)("span",{className:"font-semibold text-sm text-foreground",children:W(e.fecha_create)})]})]})]})]})})},e.id)})})]})}function K(e){let{className:a,type:s,...t}=e;return(0,l.jsx)("input",{type:s,"data-slot":"input",className:j("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...t})}var Z=s(2894);function Q(e){let{className:a,...s}=e;return(0,l.jsx)(Z.b,{"data-slot":"label",className:j("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...s})}function ee(e){let{className:a,...s}=e;return(0,l.jsx)("textarea",{"data-slot":"textarea",className:j("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...s})}var ea=s(8854),es=s(5917),et=s(4033),er=s(2108);function eo(e){let{...a}=e;return(0,l.jsx)(ea.bL,{"data-slot":"select",...a})}function en(e){let{...a}=e;return(0,l.jsx)(ea.WT,{"data-slot":"select-value",...a})}function ei(e){let{className:a,size:s="default",children:t,...r}=e;return(0,l.jsxs)(ea.l9,{"data-slot":"select-trigger","data-size":s,className:j("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...r,children:[t,(0,l.jsx)(ea.In,{asChild:!0,children:(0,l.jsx)(et.A,{className:"size-4 opacity-50"})})]})}function el(e){let{className:a,children:s,position:t="popper",...r}=e;return(0,l.jsx)(ea.ZL,{children:(0,l.jsxs)(ea.UC,{"data-slot":"select-content",className:j("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-[200] max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:t,...r,children:[(0,l.jsx)(ed,{}),(0,l.jsx)(ea.LM,{className:j("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,l.jsx)(eu,{})]})})}function ec(e){let{className:a,children:s,...t}=e;return(0,l.jsxs)(ea.q7,{"data-slot":"select-item",className:j("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",a),...t,children:[(0,l.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,l.jsx)(ea.VF,{children:(0,l.jsx)(es.A,{className:"size-4"})})}),(0,l.jsx)(ea.p4,{children:s})]})}function ed(e){let{className:a,...s}=e;return(0,l.jsx)(ea.PP,{"data-slot":"select-scroll-up-button",className:j("flex cursor-default items-center justify-center py-1",a),...s,children:(0,l.jsx)(er.A,{className:"size-4"})})}function eu(e){let{className:a,...s}=e;return(0,l.jsx)(ea.wn,{"data-slot":"select-scroll-down-button",className:j("flex cursor-default items-center justify-center py-1",a),...s,children:(0,l.jsx)(et.A,{className:"size-4"})})}var em=s(7321);function ep(e){let{className:a,orientation:s="horizontal",decorative:t=!0,...r}=e;return(0,l.jsx)(em.b,{"data-slot":"separator-root",decorative:t,orientation:s,className:j("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",a),...r})}var ex=s(3026);function eh(e){let{className:a,defaultValue:s,value:t,min:r=0,max:o=100,...n}=e,i=(0,c.useMemo)(()=>Array.isArray(t)?t:Array.isArray(s)?s:[r,o],[t,s,r,o]);return(0,l.jsxs)(ex.bL,{"data-slot":"slider",defaultValue:s,value:t,min:r,max:o,className:j("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",a),...n,children:[(0,l.jsx)(ex.CC,{"data-slot":"slider-track",className:j("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:(0,l.jsx)(ex.Q6,{"data-slot":"slider-range",className:j("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:i.length},(e,a)=>(0,l.jsx)(ex.zi,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},a))]})}var eg=s(4281),ef=s(5319),eb=s(7326),ev=s(6748),ej=s(4233),eN=s(9778),ey=s(9666),ew=s(8720);let eC={platformName:"Cupones Digitales",primaryColor:"oklch(0.45 0.15 250)",accentColor:"oklch(0.68 0.19 35)",tagline:"Descubre ofertas locales personalizadas para tu comunidad.",backgroundColor:"#f7f7fb",heroImageUrl:"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=1200&h=600&fit=crop",primaryButtonLabel:"Ver cupones destacados",secondaryButtonLabel:"Personalizar experiencia"};function ek(e){let a=document.documentElement;a.style.setProperty("--primary",e.primaryColor),a.style.setProperty("--accent",e.accentColor),e.backgroundColor?a.style.setProperty("--brand-background",e.backgroundColor):a.style.removeProperty("--brand-background")}function ez(e){let a=parseInt(e.slice(1,3),16)/255,s=parseInt(e.slice(3,5),16)/255,t=parseInt(e.slice(5,7),16)/255,r=Math.cbrt(.4122214708*a+.5363325363*s+.0514459929*t),o=Math.cbrt(.2119034982*a+.6806995451*s+.1073969566*t),n=Math.cbrt(.0883024619*a+.2817188376*s+.6299787005*t),i=1.9779984951*r-2.428592205*o+.4505937099*n,l=.0259040371*r+.7827717662*o-.808675766*n,c=Math.sqrt(i*i+l*l),d=180*Math.atan2(l,i)/Math.PI;return"oklch(".concat((.2104542553*r+.793617785*o-.0040720468*n).toFixed(3)," ").concat(c.toFixed(3)," ").concat(d.toFixed(3),")")}function eS(e){let a=e.match(/oklch\(([\d.]+)\s+([\d.]+)\s+([\d.]+)\)/);if(!a)return"#000000";let s=parseFloat(a[1]),t=parseFloat(a[2]),r=parseFloat(a[3])*Math.PI/180,o=t*Math.cos(r),n=t*Math.sin(r),i=s+.3963377774*o+.2158037573*n,l=s-.1055613458*o-.0638541728*n,c=s-.0894841775*o-1.291485548*n,d=i*i*i,u=l*l*l,m=c*c*c,p=Math.round(Math.max(0,Math.min(255,(4.0767416621*d-3.3077115913*u+.2309699292*m)*255))),x=Math.round(Math.max(0,Math.min(255,(-1.2684380046*d+2.6097574011*u-.3413193965*m)*255))),h=Math.round(Math.max(0,Math.min(255,(-.0041960863*d-.7034186147*u+1.707614701*m)*255)));return"#".concat(p.toString(16).padStart(2,"0")).concat(x.toString(16).padStart(2,"0")).concat(h.toString(16).padStart(2,"0"))}function eI(e){let{business:a,brandConfig:s,onBrandConfigUpdate:t}=e,r=(0,c.useRef)(null),[o,n]=(0,c.useState)({name:a.name,category:a.category,description:a.description,address:a.address,phone:a.phone,hours:a.hours,email:a.email||"",website:a.website||""}),[i,d]=(0,c.useState)({platformName:(null==s?void 0:s.platformName)||"Cupones Digitales",primaryColor:(null==s?void 0:s.primaryColor)||"oklch(0.45 0.15 250)",accentColor:(null==s?void 0:s.accentColor)||"oklch(0.68 0.19 35)",primaryColorHex:"#4F46E5",accentColorHex:"#E8965A",logoUrl:(null==s?void 0:s.logoUrl)||"",tagline:(null==s?void 0:s.tagline)||"Descubre ofertas locales personalizadas para tu comunidad.",backgroundColor:(null==s?void 0:s.backgroundColor)||"#f7f7fb",heroImageUrl:(null==s?void 0:s.heroImageUrl)||"",primaryButtonLabel:(null==s?void 0:s.primaryButtonLabel)||"Ver cupones destacados",secondaryButtonLabel:(null==s?void 0:s.secondaryButtonLabel)||"Personalizar experiencia",borderRadius:8,spacing:4,fontSize:16});return(0,c.useEffect)(()=>{if(s){let e=eS(s.primaryColor),a=eS(s.accentColor);d(t=>({...t,platformName:s.platformName,primaryColor:s.primaryColor,accentColor:s.accentColor,primaryColorHex:e,accentColorHex:a,logoUrl:s.logoUrl||"",tagline:s.tagline||t.tagline,backgroundColor:s.backgroundColor||t.backgroundColor,heroImageUrl:s.heroImageUrl||t.heroImageUrl,primaryButtonLabel:s.primaryButtonLabel||t.primaryButtonLabel,secondaryButtonLabel:s.secondaryButtonLabel||t.secondaryButtonLabel}))}},[s]),(0,l.jsxs)("div",{className:"space-y-6 max-w-4xl",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-3xl font-bold tracking-tight mb-2",children:"Business Settings"}),(0,l.jsx)("p",{className:"text-muted-foreground",children:"Manage your business profile and customize your white-label branding"})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("input",{ref:r,type:"file",accept:".json",onChange:e=>{var a;let s=null==(a=e.target.files)?void 0:a[0];if(!s)return;let t=new FileReader;t.onload=e=>{try{var a;let s=null==(a=e.target)?void 0:a.result,t=JSON.parse(s);if(!t.business||!t.branding||!t.metadata)throw Error("Formato de configuraci\xf3n inv\xe1lido");n({...o,name:t.business.name,category:t.business.category,description:t.business.description,address:t.business.address,phone:t.business.phone,hours:t.business.hours,email:t.business.email,website:t.business.website}),d({platformName:t.branding.platformName,primaryColor:t.branding.primaryColor,accentColor:t.branding.accentColor,primaryColorHex:t.branding.primaryColorHex,accentColorHex:t.branding.accentColorHex,logoUrl:t.branding.logoUrl||"",tagline:t.branding.tagline||i.tagline,backgroundColor:t.branding.backgroundColor||i.backgroundColor,heroImageUrl:t.branding.heroImageUrl||i.heroImageUrl,primaryButtonLabel:t.branding.primaryButtonLabel||i.primaryButtonLabel,secondaryButtonLabel:t.branding.secondaryButtonLabel||i.secondaryButtonLabel,borderRadius:t.branding.borderRadius||8,spacing:t.branding.spacing||4,fontSize:t.branding.fontSize||16}),ew.oR.success("\xa1Configuraci\xf3n importada exitosamente! Recuerda guardar los cambios.")}catch(e){ew.oR.error("Error al importar la configuraci\xf3n"),console.error("Import error:",e)}},t.readAsText(s),e.target.value=""},className:"hidden"}),(0,l.jsxs)(y,{variant:"outline",onClick:()=>{var e;return null==(e=r.current)?void 0:e.click()},className:"gap-2",children:[(0,l.jsx)(eg.C,{className:"w-4 h-4"}),"Importar"]}),(0,l.jsxs)(y,{variant:"outline",onClick:()=>{try{let e={business:o,branding:{platformName:i.platformName,primaryColor:ez(i.primaryColorHex),accentColor:ez(i.accentColorHex),primaryColorHex:i.primaryColorHex,accentColorHex:i.accentColorHex,logoUrl:i.logoUrl,tagline:i.tagline,backgroundColor:i.backgroundColor,heroImageUrl:i.heroImageUrl,primaryButtonLabel:i.primaryButtonLabel,secondaryButtonLabel:i.secondaryButtonLabel,borderRadius:i.borderRadius,spacing:i.spacing,fontSize:i.fontSize,businessId:a.id},metadata:{version:"1.0.0",exportedAt:new Date().toISOString(),businessId:a.id}},s=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),t=URL.createObjectURL(s),r=document.createElement("a");r.href=t,r.download="customization-".concat(a.id,"-").concat(Date.now(),".json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t),ew.oR.success("\xa1Configuraci\xf3n exportada exitosamente!")}catch(e){ew.oR.error("Error al exportar la configuraci\xf3n"),console.error("Export error:",e)}},className:"gap-2",children:[(0,l.jsx)(ef.z,{className:"w-4 h-4"}),"Exportar"]}),(0,l.jsxs)(y,{variant:"outline",onClick:()=>{confirm("\xbfEst\xe1s seguro de que deseas restablecer toda la configuraci\xf3n a los valores predeterminados?")&&(n({name:a.name,category:a.category,description:a.description,address:a.address,phone:a.phone,hours:a.hours,email:a.email||"",website:a.website||""}),d({platformName:"Cupones Digitales",primaryColor:"oklch(0.45 0.15 250)",accentColor:"oklch(0.68 0.19 35)",primaryColorHex:"#4F46E5",accentColorHex:"#E8965A",logoUrl:"",tagline:"Descubre ofertas locales personalizadas para tu comunidad.",backgroundColor:"#f7f7fb",heroImageUrl:"",primaryButtonLabel:"Ver cupones destacados",secondaryButtonLabel:"Personalizar experiencia",borderRadius:8,spacing:4,fontSize:16}),ew.oR.success("Configuraci\xf3n restablecida a valores predeterminados"))},className:"gap-2",children:[(0,l.jsx)(eb.P,{className:"w-4 h-4"}),"Restablecer"]})]})]}),(0,l.jsxs)(E,{children:[(0,l.jsxs)(L,{children:[(0,l.jsx)(P,{children:"Perfil del Negocio"}),(0,l.jsx)(D,{children:"Actualiza la informaci\xf3n de tu negocio visible para los clientes"})]}),(0,l.jsxs)(A,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(Q,{htmlFor:"business-name",children:"Nombre del Negocio *"}),(0,l.jsx)(K,{id:"business-name",value:o.name,onChange:e=>n({...o,name:e.target.value})})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(Q,{htmlFor:"category",children:"Categor\xeda *"}),(0,l.jsxs)(eo,{value:o.category,onValueChange:e=>n({...o,category:e}),children:[(0,l.jsx)(ei,{id:"category",children:(0,l.jsx)(en,{})}),(0,l.jsxs)(el,{children:[(0,l.jsx)(ec,{value:"food",children:"Comida y Restaurantes"}),(0,l.jsx)(ec,{value:"retail",children:"Tiendas"}),(0,l.jsx)(ec,{value:"services",children:"Servicios"}),(0,l.jsx)(ec,{value:"entertainment",children:"Entretenimiento"})]})]})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(Q,{htmlFor:"description",children:"Descripci\xf3n"}),(0,l.jsx)(ee,{id:"description",value:o.description,onChange:e=>n({...o,description:e.target.value}),rows:3,placeholder:"Cu\xe9ntale a los clientes sobre tu negocio"})]}),(0,l.jsx)(ep,{}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(Q,{htmlFor:"address",children:"Direcci\xf3n"}),(0,l.jsx)(K,{id:"address",value:o.address,onChange:e=>n({...o,address:e.target.value}),placeholder:"Calle Principal 123, Ciudad, Estado"})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(Q,{htmlFor:"phone",children:"Tel\xe9fono"}),(0,l.jsx)(K,{id:"phone",type:"tel",value:o.phone,onChange:e=>n({...o,phone:e.target.value}),placeholder:"(555) 123-4567"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(Q,{htmlFor:"email",children:"Email"}),(0,l.jsx)(K,{id:"email",type:"email",value:o.email,onChange:e=>n({...o,email:e.target.value}),placeholder:"contacto@negocio.com"})]})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(Q,{htmlFor:"hours",children:"Horario"}),(0,l.jsx)(K,{id:"hours",value:o.hours,onChange:e=>n({...o,hours:e.target.value}),placeholder:"Lun-Vie: 9am-6pm"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(Q,{htmlFor:"website",children:"Sitio Web"}),(0,l.jsx)(K,{id:"website",type:"url",value:o.website,onChange:e=>n({...o,website:e.target.value}),placeholder:"https://www.tunegocio.com"})]})]}),(0,l.jsx)("div",{className:"flex justify-end pt-4",children:(0,l.jsxs)(y,{onClick:()=>{try{let e={...a,...o};localStorage.setItem("business-profile-".concat(a.id),JSON.stringify(e)),ew.oR.success("\xa1Perfil de negocio actualizado exitosamente!")}catch(e){ew.oR.error("Error al guardar el perfil del negocio"),console.error("Save profile error:",e)}},className:"gap-2",children:[(0,l.jsx)(ev.g,{className:"w-4 h-4"}),"Guardar Cambios"]})})]})]}),(0,l.jsxs)(E,{children:[(0,l.jsxs)(L,{children:[(0,l.jsxs)(P,{className:"flex items-center gap-2",children:[(0,l.jsx)(ej.e,{className:"w-5 h-5"}),"Marca White-Label"]}),(0,l.jsx)(D,{children:"Personaliza la apariencia de la plataforma con los colores e im\xe1genes de tu marca"})]}),(0,l.jsxs)(A,{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(Q,{htmlFor:"platform-name",children:"Nombre de la Plataforma"}),(0,l.jsx)(K,{id:"platform-name",value:i.platformName,onChange:e=>d({...i,platformName:e.target.value}),placeholder:"Cupones Digitales"}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Este nombre aparecer\xe1 en la cabecera de la plataforma"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(Q,{htmlFor:"tagline",children:"Eslogan"}),(0,l.jsx)(K,{id:"tagline",value:i.tagline,onChange:e=>d({...i,tagline:e.target.value}),placeholder:"Descubre ofertas locales personalizadas para tu comunidad."}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Texto descriptivo que aparece en la p\xe1gina principal"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(Q,{htmlFor:"logo-url",children:"URL del Logo"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(K,{id:"logo-url",value:i.logoUrl,onChange:e=>d({...i,logoUrl:e.target.value}),placeholder:"https://ejemplo.com/logo.png"}),(0,l.jsx)(y,{variant:"outline",size:"icon",className:"shrink-0",children:(0,l.jsx)(eN._,{className:"w-4 h-4"})})]}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"URL de la imagen de tu logo (recomendado: PNG transparente)"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(Q,{htmlFor:"hero-image-url",children:"URL de Imagen Hero"}),(0,l.jsx)(K,{id:"hero-image-url",value:i.heroImageUrl,onChange:e=>d({...i,heroImageUrl:e.target.value}),placeholder:"https://images.unsplash.com/photo-..."}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Imagen principal de la p\xe1gina de inicio"})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(Q,{htmlFor:"primary-button-label",children:"Etiqueta Bot\xf3n Principal"}),(0,l.jsx)(K,{id:"primary-button-label",value:i.primaryButtonLabel,onChange:e=>d({...i,primaryButtonLabel:e.target.value}),placeholder:"Ver cupones destacados"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(Q,{htmlFor:"secondary-button-label",children:"Etiqueta Bot\xf3n Secundario"}),(0,l.jsx)(K,{id:"secondary-button-label",value:i.secondaryButtonLabel,onChange:e=>d({...i,secondaryButtonLabel:e.target.value}),placeholder:"Personalizar experiencia"})]})]})]}),(0,l.jsx)(ep,{}),(0,l.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(Q,{htmlFor:"primary-color",children:"Color Primario"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(K,{id:"primary-color",type:"color",value:i.primaryColorHex,onChange:e=>d({...i,primaryColorHex:e.target.value}),className:"w-16 h-10 cursor-pointer"}),(0,l.jsx)(K,{value:i.primaryColorHex,onChange:e=>d({...i,primaryColorHex:e.target.value}),placeholder:"#4F46E5",className:"flex-1"})]}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Color principal de marca para botones y destacados"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(Q,{htmlFor:"accent-color",children:"Color de Acento"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(K,{id:"accent-color",type:"color",value:i.accentColorHex,onChange:e=>d({...i,accentColorHex:e.target.value}),className:"w-16 h-10 cursor-pointer"}),(0,l.jsx)(K,{value:i.accentColorHex,onChange:e=>d({...i,accentColorHex:e.target.value}),placeholder:"#E8965A",className:"flex-1"})]}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Color de resaltado para ofertas y CTAs"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(Q,{htmlFor:"background-color",children:"Color de Fondo"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(K,{id:"background-color",type:"color",value:i.backgroundColor,onChange:e=>d({...i,backgroundColor:e.target.value}),className:"w-16 h-10 cursor-pointer"}),(0,l.jsx)(K,{value:i.backgroundColor,onChange:e=>d({...i,backgroundColor:e.target.value}),placeholder:"#f7f7fb",className:"flex-1"})]}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Color de fondo principal de la plataforma"})]})]}),(0,l.jsx)(ep,{}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("h4",{className:"font-semibold",children:"Ajustes de Estilo"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(Q,{htmlFor:"border-radius",children:"Radio de Borde"}),(0,l.jsxs)("span",{className:"text-sm text-muted-foreground",children:[i.borderRadius,"px"]})]}),(0,l.jsx)(eh,{id:"border-radius",min:0,max:24,step:1,value:[i.borderRadius],onValueChange:e=>d({...i,borderRadius:e[0]}),className:"w-full"}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Redondeo de esquinas en tarjetas y botones"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(Q,{htmlFor:"spacing",children:"Espaciado"}),(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:i.spacing})]}),(0,l.jsx)(eh,{id:"spacing",min:1,max:8,step:1,value:[i.spacing],onValueChange:e=>d({...i,spacing:e[0]}),className:"w-full"}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Espaciado entre elementos"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(Q,{htmlFor:"font-size",children:"Tama\xf1o de Fuente"}),(0,l.jsxs)("span",{className:"text-sm text-muted-foreground",children:[i.fontSize,"px"]})]}),(0,l.jsx)(eh,{id:"font-size",min:12,max:20,step:1,value:[i.fontSize],onValueChange:e=>d({...i,fontSize:e[0]}),className:"w-full"}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Tama\xf1o base de fuente"})]})]})]}),(0,l.jsx)(ep,{}),(0,l.jsx)("div",{className:"bg-muted/50 border rounded-lg p-4",children:(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)(ey.q,{className:"w-5 h-5 text-primary mt-0.5"}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h4",{className:"font-semibold mb-1",children:"Plataforma White-Label"}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:"Estas personalizaciones se aplicar\xe1n en toda la plataforma de cara al cliente. Tu marca reemplazar\xe1 el tema por defecto, creando una experiencia completamente personalizada para tus clientes."})]})]})}),(0,l.jsx)("div",{className:"flex justify-end pt-4",children:(0,l.jsxs)(y,{onClick:()=>{try{let e={platformName:i.platformName,primaryColor:ez(i.primaryColorHex),accentColor:ez(i.accentColorHex),logoUrl:i.logoUrl,tagline:i.tagline,backgroundColor:i.backgroundColor,heroImageUrl:i.heroImageUrl,primaryButtonLabel:i.primaryButtonLabel,secondaryButtonLabel:i.secondaryButtonLabel,businessId:a.id};t(e),ek(e),ew.oR.success("\xa1Configuraci\xf3n de marca actualizada exitosamente!")}catch(e){ew.oR.error("Error al guardar la configuraci\xf3n de marca"),console.error("Save branding error:",e)}},className:"gap-2",children:[(0,l.jsx)(ev.g,{className:"w-4 h-4"}),"Guardar Marca"]})})]})]}),(0,l.jsxs)(E,{children:[(0,l.jsxs)(L,{children:[(0,l.jsx)(P,{children:"Integraci\xf3n API"}),(0,l.jsx)(D,{children:"Conecta tus sistemas a la plataforma"})]}),(0,l.jsxs)(A,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"bg-muted/50 border rounded-lg p-4",children:[(0,l.jsx)("p",{className:"text-sm mb-4",children:"Usa la API para integrar con tus sistemas existentes. Gestiona cupones, rastrea canjes y sincroniza datos de clientes program\xe1ticamente."}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(Q,{className:"text-xs text-muted-foreground",children:"Endpoint API"}),(0,l.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,l.jsx)(K,{value:"https://api.cuponesdigitales.io/v1",readOnly:!0,className:"font-mono text-sm"}),(0,l.jsx)(y,{variant:"outline",size:"sm",children:"Copiar"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(Q,{className:"text-xs text-muted-foreground",children:"Clave API"}),(0,l.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,l.jsx)(K,{value:"sk_live_••••••••••••••••••••",readOnly:!0,type:"password",className:"font-mono text-sm"}),(0,l.jsx)(y,{variant:"outline",size:"sm",children:"Mostrar"})]})]})]})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center pt-2",children:[(0,l.jsx)(y,{variant:"outline",children:"Ver Documentaci\xf3n API"}),(0,l.jsx)(y,{variant:"outline",children:"Generar Nueva Clave"})]})]})]})]})}var e_=s(1295),eE=s(2733),eL=s(9725),eP=s(7611);let eD=(0,f.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function eA(e){let{className:a,variant:s,...t}=e;return(0,l.jsx)("div",{"data-slot":"alert",role:"alert",className:j(eD({variant:s}),a),...t})}function eF(e){let{className:a,...s}=e;return(0,l.jsx)("div",{"data-slot":"alert-title",className:j("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",a),...s})}function eR(e){let{className:a,...s}=e;return(0,l.jsx)("div",{"data-slot":"alert-description",className:j("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...s})}function eT(e){var a;let{onBackToCustomer:s,brandConfigs:t,onBrandConfigUpdate:r,apiData:o,partnerId:n,isLoading:i,error:d,onRefresh:u}=e,[m,p]=(0,c.useState)("overview"),x=(0,c.useMemo)(()=>o?o.cupones.filter(e=>Number(e.id_partner)===n):[],[o,n]),h=(0,c.useMemo)(()=>{var e;let a=x[0];return{id:"partner-".concat(n),name:"Partner ".concat(n),logo:(null==a?void 0:a.foto_post)||(null==a?void 0:a.foto)||"https://routicket.com/favicon.ico",category:"food",description:(null==o||null==(e=o.api_usage)?void 0:e.note)||"Datos sincronizados desde la API de Routicket.",address:"No disponible",hours:"Sin horario disponible",phone:"No disponible",coverImage:(null==a?void 0:a.foto)||(null==a?void 0:a.foto_post)||"https://routicket.com/favicon.ico"}},[n,null==o||null==(a=o.api_usage)?void 0:a.note,x]),g=null==t?void 0:t[h.id],f=null==o?void 0:o.api_usage,b=null==o?void 0:o.stats;return(0,l.jsxs)("div",{className:"min-h-screen bg-muted/30",children:[(0,l.jsx)(ew.l$,{position:"top-center",richColors:!0}),(0,l.jsx)("header",{className:"border-b bg-background/95 backdrop-blur supports-backdrop-filter:bg-background/80 sticky top-0 z-50",children:(0,l.jsx)("div",{className:"container mx-auto px-6 py-4",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsxs)(y,{variant:"ghost",size:"sm",className:"gap-2",onClick:s,children:[(0,l.jsx)(e_.n,{className:"w-4 h-4"}),"Customer View"]}),(0,l.jsx)("div",{className:"h-6 w-px bg-border"}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,l.jsx)(eE.f,{className:"w-6 h-6 text-primary",weight:"duotone"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-lg font-semibold",children:h.name}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Business Dashboard"})]})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[f&&(0,l.jsxs)(_,{variant:"outline",className:"gap-2",children:[(0,l.jsx)(eL.x,{className:"w-4 h-4"}),"API ",f.contador,"/",f.contador_prev+f.contador]}),(0,l.jsxs)(_,{variant:"secondary",className:"gap-2",children:[(0,l.jsx)(eL.x,{className:"w-4 h-4"}),"Admin Mode"]}),(0,l.jsxs)(y,{variant:"outline",size:"sm",onClick:u,disabled:i,className:"gap-2",children:[(0,l.jsx)(eb.P,{className:"w-4 h-4 ".concat(i?"animate-spin":"")}),i?"Actualizando":"Actualizar"]})]})]})})}),(0,l.jsxs)("main",{className:"container mx-auto px-6 py-8",children:[d&&(0,l.jsxs)(eA,{variant:"destructive",className:"mb-6",children:[(0,l.jsx)(eF,{children:"Ocurri\xf3 un problema al consultar la API"}),(0,l.jsxs)(eR,{children:[d,(0,l.jsx)(y,{variant:"outline",size:"sm",className:"ml-3",onClick:u,children:"Reintentar"})]})]}),(0,l.jsxs)(C,{value:m,onValueChange:p,className:"space-y-6",children:[(0,l.jsxs)(k,{className:"grid w-full max-w-2xl grid-cols-4",children:[(0,l.jsxs)(z,{value:"overview",className:"gap-2",children:[(0,l.jsx)(eL.x,{className:"w-4 h-4"}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Overview"})]}),(0,l.jsxs)(z,{value:"analytics",className:"gap-2",children:[(0,l.jsx)(B._,{className:"w-4 h-4"}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Analytics"})]}),(0,l.jsxs)(z,{value:"coupons",className:"gap-2",children:[(0,l.jsx)(F.v,{className:"w-4 h-4"}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Coupons"})]}),(0,l.jsxs)(z,{value:"settings",className:"gap-2",children:[(0,l.jsx)(eP.O,{className:"w-4 h-4"}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Settings"})]})]}),(0,l.jsxs)(S,{value:"overview",className:"space-y-6",children:[(0,l.jsx)("div",{className:"rounded-lg border bg-linear-to-r from-primary/10 via-primary/5 to-background p-6",children:(0,l.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold tracking-tight mb-2",children:"Welcome to Your Admin Dashboard"}),(0,l.jsx)("p",{className:"text-muted-foreground max-w-2xl",children:"Monitor your coupon performance in real-time. Track redemptions, analyze customer engagement, and grow your business with data-driven insights."})]}),(0,l.jsx)(_,{variant:"outline",className:"shrink-0",children:"Datos en vivo"})]})}),(0,l.jsx)(O,{isLoading:i,partnerName:h.name,apiUsage:f,stats:b,coupons:x})]}),(0,l.jsx)(S,{value:"analytics",className:"space-y-6",children:(0,l.jsx)(q,{isLoading:i,stats:b,coupons:x})}),(0,l.jsx)(S,{value:"coupons",className:"space-y-6",children:(0,l.jsx)($,{isLoading:i,coupons:x})}),(0,l.jsx)(S,{value:"settings",className:"space-y-6",children:(0,l.jsx)(eI,{business:h,brandConfig:g,onBrandConfigUpdate:e=>{r(function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...a,[h.id]:e}})}})})]})]})]})}var eU=s(9034);function eO(e){let{className:a,children:s,...t}=e;return(0,l.jsxs)(eU.bL,{"data-slot":"scroll-area",className:j("relative",a),...t,children:[(0,l.jsx)(eU.LM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:s}),(0,l.jsx)(eB,{}),(0,l.jsx)(eU.OK,{})]})}function eB(e){let{className:a,orientation:s="vertical",...t}=e;return(0,l.jsx)(eU.VM,{"data-slot":"scroll-area-scrollbar",orientation:s,className:j("flex touch-none p-px transition-colors select-none","vertical"===s&&"h-full w-2.5 border-l border-l-transparent","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent",a),...t,children:(0,l.jsx)(eU.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var eM=s(2914),eV=s(3278),eH=s(8016),eX=s(2613),eq=s(9417),eG=s(7982),eJ=s(2861),eY=s(6955),eW=s(6497),e$=s(1733);function eK(){let{state:e,selectElement:a,updateProperty:s,undo:t,redo:r,reset:o,saveCustomizations:n}=h(),{selectedElement:i,historyIndex:d,history:u,customizations:m}=e,[p,x]=(0,c.useState)("idle"),g=(0,c.useRef)(null);(0,c.useEffect)(()=>()=>{g.current&&clearTimeout(g.current)},[]);let f=async()=>{if("saving"!==p){x("saving");try{await n(),ew.oR.success("\xa1Cambios guardados exitosamente!"),x("success")}catch(e){console.error("No se pudieron guardar los cambios:",e),ew.oR.error("No se pudieron guardar los cambios. Intenta de nuevo."),x("error")}finally{g.current&&clearTimeout(g.current),g.current=setTimeout(()=>x("idle"),2e3)}}};return(0,l.jsx)(eW.N,{children:i&&(0,l.jsx)(e$.P.div,{initial:{x:400,opacity:0},animate:{x:0,opacity:1},exit:{x:400,opacity:0},transition:{type:"spring",damping:25,stiffness:200},className:"fixed top-20 right-4 z-[100] w-96",children:(0,l.jsxs)(E,{className:j("transition-[background,box-shadow,border-color] duration-500",{idle:"bg-card border-2 shadow-2xl",saving:"bg-gradient-to-br from-amber-100 via-amber-50 to-white border-amber-200 shadow-[0_15px_45px_rgba(245,158,11,0.2)] dark:from-amber-900/30 dark:via-amber-900/10 dark:to-transparent dark:border-amber-800",success:"bg-gradient-to-br from-emerald-200 via-emerald-100 to-emerald-50 border-emerald-300 text-emerald-950 shadow-[0_20px_60px_rgba(16,185,129,0.35)] dark:from-emerald-900/50 dark:via-emerald-900/30 dark:to-transparent dark:border-emerald-800",error:"bg-gradient-to-br from-rose-200 via-rose-100 to-rose-50 border-rose-300 text-rose-950 shadow-[0_20px_60px_rgba(244,63,94,0.35)] dark:from-rose-900/50 dark:via-rose-900/30 dark:to-transparent dark:border-rose-800"}[p]),children:[(0,l.jsxs)("div",{className:"p-4 border-b bg-muted/30",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(e=>{switch(e){case"text":return(0,l.jsx)(eM.G,{className:"w-4 h-4"});case"image":return(0,l.jsx)(eN._,{className:"w-4 h-4"});default:return(0,l.jsx)(ej.e,{className:"w-4 h-4"})}})(i.category),(0,l.jsx)("h3",{className:"font-semibold",children:i.elementLabel})]}),(0,l.jsx)(y,{variant:"ghost",size:"icon",onClick:()=>a(null),className:"h-8 w-8",children:(0,l.jsx)(eV.X,{className:"w-4 h-4"})})]}),(0,l.jsx)(_,{variant:"secondary",className:"text-xs",children:i.elementType})]}),(0,l.jsx)(eO,{className:"h-[calc(100vh-300px)] max-h-[500px]",children:(0,l.jsx)("div",{className:"p-4 space-y-4",children:i.properties.map(e=>(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(Q,{className:"text-sm font-medium",children:e.label}),(e=>{let a=(e=>{if(!i)return e.value;let a=m[i.elementId];return a&&void 0!==a[e.id]?a[e.id]:e.value})(e);switch(e.type){case"color":{let t="string"==typeof a&&a.startsWith("#")?a:"#000000",r="string"==typeof a?a:"";return(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(K,{type:"color",value:t,onChange:a=>s(i.elementId,e.id,a.target.value),className:"w-16 h-10 cursor-pointer"}),(0,l.jsx)(K,{value:r,onChange:a=>s(i.elementId,e.id,a.target.value),placeholder:"#000000",className:"flex-1"})]})}case"image":return(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(K,{value:"string"==typeof a?a:"",onChange:a=>s(i.elementId,e.id,a.target.value),placeholder:"https://example.com/image.jpg"}),a&&"string"==typeof a&&(0,l.jsx)("img",{src:a,alt:"Preview",className:"w-full h-32 object-cover rounded border"})]});case"number":case"fontSize":case"spacing":case"borderRadius":return(0,l.jsx)("div",{className:"space-y-2",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(eh,{value:["number"==typeof a?a:e.min||0],onValueChange:a=>s(i.elementId,e.id,a[0]),min:e.min||0,max:e.max||100,step:e.step||1,className:"flex-1"}),(0,l.jsxs)("span",{className:"text-sm text-muted-foreground w-16 text-right",children:["number"==typeof a?a:0,e.unit||""]})]})});case"select":{var t;let r=null!=(t=e.options)?t:[],o=a=>"".concat(e.id,"-").concat(a),n=r.findIndex(e=>e.value===a),c=n>=0?o(n):"";return(0,l.jsxs)(eo,{value:c,onValueChange:a=>{var t;let n=r.findIndex((e,s)=>o(s)===a),l=n>=0?r[n]:void 0,c=null!=(t=null==l?void 0:l.value)?t:a;s(i.elementId,e.id,c)},children:[(0,l.jsx)(ei,{children:(0,l.jsx)(en,{placeholder:e.label})}),(0,l.jsx)(el,{children:r.map((e,a)=>(0,l.jsx)(ec,{value:o(a),children:e.label},o(a)))})]})}default:return null}})(e)]},e.id))})}),(0,l.jsx)(ep,{}),(0,l.jsxs)("div",{className:"p-4 space-y-2",children:[(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)(y,{variant:"outline",size:"sm",onClick:t,disabled:d<=0,className:"flex-1 gap-2",children:[(0,l.jsx)(eH.o,{className:"w-4 h-4"}),"Deshacer"]}),(0,l.jsxs)(y,{variant:"outline",size:"sm",onClick:r,disabled:d>=u.length-1,className:"flex-1 gap-2",children:[(0,l.jsx)(eX.S,{className:"w-4 h-4"}),"Rehacer"]})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)(y,{variant:"outline",size:"sm",onClick:()=>{o(),ew.oR.success("Personalizaciones reiniciadas")},className:"flex-1 gap-2",children:[(0,l.jsx)(eq.l,{className:"w-4 h-4"}),"Reiniciar"]}),(0,l.jsxs)(y,{size:"sm",onClick:f,className:"flex-1 gap-2",disabled:"saving"===p,children:["saving"===p?(0,l.jsx)(eG.N,{className:"w-4 h-4 animate-spin"}):(0,l.jsx)(ev.g,{className:"w-4 h-4"}),"saving"===p?"Guardando...":"success"===p?"Guardado":"Guardar"]})]}),"idle"!==p&&(0,l.jsxs)("div",{className:"flex items-center gap-2 rounded-md border px-3 py-2 text-sm",children:["saving"===p&&(0,l.jsx)(eG.N,{className:"w-4 h-4 animate-spin text-muted-foreground"}),"success"===p&&(0,l.jsx)(eJ.r,{className:"w-4 h-4 text-emerald-500"}),"error"===p&&(0,l.jsx)(eY.t,{className:"w-4 h-4 text-destructive"}),(0,l.jsxs)("span",{className:"text-muted-foreground",children:["saving"===p&&"Guardando tus personalizaciones...","success"===p&&"Cambios guardados exitosamente.","error"===p&&"Ocurri\xf3 un error al guardar. Reintenta."]})]})]})]})})})}let eZ="brand-configs";var eQ=s(5704);async function e0(e){var a;let{apiPublicKey:s,userId:t,partnerId:r,apiSecret:o,signal:n,useDemoData:i}=e,l=new URL("/api/coupons",window.location.origin);(null!=i?i:void 0!==eQ&&(null==(a=eQ.env)?void 0:a.NEXT_PUBLIC_USE_DEMO_DATA)==="true")?l.searchParams.set("demo","true"):(l.searchParams.set("api_public",s),o&&l.searchParams.set("api_secret",o)),void 0!==t&&l.searchParams.set("user_id",String(t)),void 0!==r&&l.searchParams.set("id_partner",String(r));let c=await fetch(l.toString(),{method:"GET",signal:n});if(!c.ok)throw Error((await c.json().catch(()=>({}))).error||"Error fetching coupons: ".concat(c.status," ").concat(c.statusText));return await c.json()}let e1={id:"mock-business-1",name:"Caf\xe9Hub Premium",logo:"https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=100&h=100&fit=crop",category:"food",description:"Tu cafeter\xeda de confianza con las mejores promociones",address:"Calle Principal 123, Centro",hours:"Lun-Vie: 8am-8pm, S\xe1b-Dom: 9am-6pm",phone:"(555) 123-4567",coverImage:"https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=1200&h=600&fit=crop",email:"contacto@cafehub.com",website:"https://cafehub.com"},e2=e=>{let a=new Date;return a.setDate(a.getDate()+e),a.toISOString()},e4=[{id:"mock-coupon-1",businessId:e1.id,title:"2x1 en Caf\xe9 Americano",description:"Disfruta de dos caf\xe9s americanos por el precio de uno. V\xe1lido de lunes a viernes.",discount:"50% OFF",image:"https://images.unsplash.com/photo-1509042239860-f550ce710b93?w=800&h=600&fit=crop",terms:"V\xe1lido solo en horario de 8am a 12pm. No acumulable con otras promociones.",expiryDate:e2(15),category:"food",redemptionCode:"CAFE2X1",isNew:!0,isActive:!0,maxRedemptions:100,currentRedemptions:23,createdAt:new Date().toISOString()},{id:"mock-coupon-2",businessId:e1.id,title:"Descuento en Reposter\xeda",description:"30% de descuento en toda nuestra selecci\xf3n de pasteles, galletas y postres artesanales.",discount:"30% OFF",image:"https://images.unsplash.com/photo-1578985545062-69928b1d9587?w=800&h=600&fit=crop",terms:"V\xe1lido en compras mayores a $500. Aplicable a toda la reposter\xeda del d\xeda.",expiryDate:e2(7),category:"food",redemptionCode:"SWEET30",isNew:!1,isActive:!0,maxRedemptions:50,currentRedemptions:45,createdAt:new Date(Date.now()-6048e5).toISOString()},{id:"mock-coupon-3",businessId:e1.id,title:"Caf\xe9 Gratis con Desayuno",description:"Obt\xe9n un caf\xe9 gratis al ordenar cualquier desayuno completo de nuestro men\xfa.",discount:"GRATIS",image:"https://images.unsplash.com/photo-1504754524776-8f4f37790ca0?w=800&h=600&fit=crop",terms:"V\xe1lido solo en consumo en tienda. Desayuno m\xednimo $300.",expiryDate:e2(30),category:"food",redemptionCode:"BREAKFAST",isNew:!0,isActive:!0,maxRedemptions:200,currentRedemptions:12,createdAt:new Date().toISOString()},{id:"mock-coupon-4",businessId:e1.id,title:"Combo Merienda",description:"Caf\xe9 + S\xe1ndwich + Postre por solo $199. La combinaci\xf3n perfecta para tu tarde.",discount:"$199",image:"https://images.unsplash.com/photo-1509440159596-0249088772ff?w=800&h=600&fit=crop",terms:"V\xe1lido de 3pm a 6pm todos los d\xedas. S\xe1ndwiches y postres del d\xeda.",expiryDate:e2(20),category:"food",redemptionCode:"COMBO199",isNew:!1,isActive:!0,maxRedemptions:150,currentRedemptions:87,createdAt:new Date(Date.now()-432e6).toISOString()},{id:"mock-coupon-5",businessId:e1.id,title:"Happy Hour Caf\xe9",description:"40% de descuento en todas las bebidas calientes durante nuestro happy hour.",discount:"40% OFF",image:"https://images.unsplash.com/photo-1461023058943-07fcbe16d735?w=800&h=600&fit=crop",terms:"V\xe1lido de 4pm a 6pm. Incluye caf\xe9s, t\xe9s y chocolates calientes.",expiryDate:e2(4),category:"food",redemptionCode:"HAPPY40",isNew:!1,isActive:!0,maxRedemptions:80,currentRedemptions:62,createdAt:new Date(Date.now()-864e6).toISOString()},{id:"mock-coupon-6",businessId:e1.id,title:"Tarjeta de Lealtad",description:"Acumula 10 sellos y obt\xe9n tu bebida favorita completamente gratis.",discount:"10+1 GRATIS",image:"https://images.unsplash.com/photo-1511920170033-f8396924c348?w=800&h=600&fit=crop",terms:"Aplicable a cualquier bebida del men\xfa. Un sello por compra mayor a $80.",expiryDate:e2(60),category:"food",redemptionCode:"LOYALTY",isNew:!0,isActive:!0,maxRedemptions:100,currentRedemptions:5,createdAt:new Date().toISOString()}];function e5(e){let{elementConfig:a,children:s,className:t=""}=e,{state:r,selectElement:o}=h(),{isEditMode:n,selectedElement:i}=r,d=(null==i?void 0:i.elementId)===a.elementId,u=(0,c.useCallback)(e=>{n&&(e.stopPropagation(),o(a))},[n,a,o]);return n?(0,l.jsxs)(e$.P.div,{onClick:u,className:"relative ".concat(t),style:{cursor:n?"pointer":"default"},whileHover:n?{scale:1.01}:{},transition:{duration:.2},children:[n&&(0,l.jsx)("div",{className:"absolute inset-0 pointer-events-none transition-all duration-200 rounded ".concat(d?"ring-2 ring-primary ring-offset-2 bg-primary/5":"hover:ring-2 hover:ring-primary/50 hover:bg-primary/5")}),n&&d&&(0,l.jsx)("div",{className:"absolute -top-6 left-0 z-50 bg-primary text-primary-foreground text-xs px-2 py-1 rounded-t pointer-events-none",children:a.elementLabel}),s]}):(0,l.jsx)(l.Fragment,{children:s})}var e3=s(3185);function e6(e){let{className:a=""}=e,{state:s,setEditMode:t}=h(),{isEditMode:r}=s;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(y,{variant:r?"default":"outline",size:"sm",onClick:()=>t(!r),className:"gap-2 ".concat(a),children:r?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eV.X,{className:"w-4 h-4"}),"Salir del modo edici\xf3n"]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e3.R,{className:"w-4 h-4",weight:"fill"}),"Modo personalizaci\xf3n"]})}),(0,l.jsx)(eW.N,{children:r&&(0,l.jsx)(e$.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"fixed top-0 left-0 right-0 z-[90] bg-primary text-primary-foreground shadow-lg",children:(0,l.jsx)("div",{className:"container mx-auto px-6 py-3",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)(_,{variant:"secondary",className:"gap-2",children:[(0,l.jsx)(e3.R,{className:"w-3 h-3",weight:"fill"}),"Modo Personalizaci\xf3n Activo"]}),(0,l.jsx)("p",{className:"text-sm",children:"Haz clic en cualquier elemento para personalizarlo"})]}),(0,l.jsxs)(y,{variant:"secondary",size:"sm",onClick:()=>t(!1),className:"gap-2",children:[(0,l.jsx)(eV.X,{className:"w-4 h-4"}),"Salir"]})]})})})})]})}let e8=[{label:"Sans (Inter)",value:"var(--font-sans, Inter, system-ui, sans-serif)"},{label:"Serif (Playfair)",value:'"Playfair Display", "Times New Roman", serif'},{label:"Rounded (Quicksand)",value:'"Quicksand", "Nunito", sans-serif'},{label:"Condensada (Oswald)",value:'"Oswald", "Arial Narrow", sans-serif'},{label:"Monoespaciada (Space Mono)",value:'"Space Mono", "Roboto Mono", monospace'}],e9={min:-2,max:10,step:.5},e7=(null==(t=e8[0])?void 0:t.value)||"var(--font-sans, Inter, system-ui, sans-serif)",ae=e8.map(e=>({label:e.label,value:e.value})),aa=[{label:"Sin decoraci\xf3n",value:"none"},{label:"Subrayado",value:"underline"},{label:"Tachado",value:"line-through"},{label:"Sobrelinea",value:"overline"}].map(e=>({label:e.label,value:e.value}));function as(e,a,s){let t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",{defaultValue:r,min:o,max:n,step:i=1}=s;return[{id:"fontSize",label:"Tama\xf1o de fuente",type:"fontSize",value:e(a,"fontSize",r),min:o,max:n,step:i,unit:"px"},{id:"color",label:"Color del texto",type:"color",value:e(a,"color",t)},{id:"fontFamily",label:"Tipograf\xeda",type:"select",value:e(a,"fontFamily",e7),options:ae},{id:"letterSpacing",label:"Espaciado entre letras",type:"number",value:e(a,"letterSpacing",0),min:e9.min,max:e9.max,step:e9.step,unit:"px"},{id:"backgroundColor",label:"Fondo del texto",type:"color",value:e(a,"backgroundColor","")},{id:"textDecoration",label:"Decoraci\xf3n del texto",type:"select",value:e(a,"textDecoration","none"),options:aa}]}function at(e,a,s){var t,r,o,n,i;let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{highlightBackground:c=!0,backgroundPadding:d,backgroundRadius:u}=l,m=e(a,"fontSize",s.fontSize),p=e(a,"color",null!=(t=s.color)?t:""),x=e(a,"fontFamily",null!=(r=s.fontFamily)?r:e7),h=e(a,"letterSpacing",null!=(o=s.letterSpacing)?o:0),g=e(a,"backgroundColor",null!=(n=s.backgroundColor)?n:""),f=e(a,"textDecoration",null!=(i=s.textDecoration)?i:"none"),b={fontSize:"".concat(m,"px"),letterSpacing:"".concat(h,"px"),textDecoration:f};return p&&(b.color=p),x&&(b.fontFamily=x),g&&"transparent"!==g&&(b.backgroundColor=g,c&&(b.display="inline-block",b.padding=null!=d?d:"0.1em 0.35em",b.borderRadius=null!=u?u:"0.45rem")),b}function ar(e){let{brandConfig:a,tagline:s,onSwitchToDashboard:t}=e,{getCustomization:r}=h(),o={elementId:"header-title",elementLabel:"T\xedtulo del encabezado",elementType:"text",category:"header",properties:as(r,"header-title",{defaultValue:24,min:16,max:48,step:1},"#111827")},n={elementId:"header-tagline",elementLabel:"Subt\xedtulo del encabezado",elementType:"text",category:"header",properties:as(r,"header-tagline",{defaultValue:12,min:10,max:24,step:1},"#6b7280")},i=at(r,"header-title",{fontSize:24,color:"#111827"}),c=at(r,"header-tagline",{fontSize:12,color:"#6b7280"});return(0,l.jsx)("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur supports-backdrop-filter:bg-background/60 border-b",children:(0,l.jsxs)("div",{className:"container mx-auto px-6 py-4 flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[a.logoUrl?(0,l.jsx)("img",{src:a.logoUrl,alt:a.platformName,className:"w-10 h-10 object-contain"}):(0,l.jsx)("div",{className:"w-10 h-10 bg-primary rounded-lg flex items-center justify-center",children:(0,l.jsx)(F.v,{className:"w-6 h-6 text-primary-foreground",weight:"fill"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)(e5,{elementConfig:o,children:(0,l.jsx)("h1",{className:"text-2xl font-bold tracking-tight",style:i,children:a.platformName})}),(0,l.jsx)(e5,{elementConfig:n,children:(0,l.jsx)("p",{className:"text-xs text-muted-foreground",style:c,children:s})})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(e6,{}),(0,l.jsxs)(y,{variant:"outline",size:"sm",className:"gap-2",onClick:t,children:[(0,l.jsx)(eE.f,{className:"w-4 h-4"}),"Business Dashboard"]})]})]})})}function ao(e){let{displayBusiness:a,brandConfig:s,tagline:t,onOpenDashboard:r}=e,{getCustomization:o}=h(),n=at(o,"hero-subtitle",{fontSize:14}),i=at(o,"hero-title",{fontSize:36}),c=at(o,"hero-description",{fontSize:16,color:"#4b5563"}),d=at(o,"hero-primary-button",{fontSize:16},{highlightBackground:!1}),u=at(o,"hero-secondary-button",{fontSize:16},{highlightBackground:!1}),m=o("hero-image","url",s.heroImageUrl||""),p=o("hero-image","opacity",80);return(0,l.jsxs)("section",{className:"relative overflow-hidden rounded-3xl border bg-card text-card-foreground",children:[(0,l.jsx)(e5,{elementConfig:{elementId:"hero-image",elementLabel:"Imagen de h\xe9roe",elementType:"image",category:"hero",properties:[{id:"url",label:"URL de imagen",type:"image",value:m},{id:"opacity",label:"Opacidad",type:"number",value:p,min:0,max:100,step:5,unit:"%"}]},children:m&&(0,l.jsx)("img",{src:m,alt:"Imagen promocional",className:"absolute inset-0 w-full h-full object-cover",style:{opacity:p/100}})}),(0,l.jsxs)("div",{className:"relative z-10 p-10 sm:p-16 bg-linear-to-r from-background/90 via-background/85 to-background/60",children:[(0,l.jsx)(e5,{elementConfig:{elementId:"hero-subtitle",elementLabel:"Subt\xedtulo del h\xe9roe",elementType:"text",category:"hero",properties:as(o,"hero-subtitle",{defaultValue:14,min:10,max:24,step:1})},children:(0,l.jsx)("p",{className:"text-sm font-semibold uppercase tracking-wide text-accent",style:n,children:a.name||s.platformName})}),(0,l.jsx)(e5,{elementConfig:{elementId:"hero-title",elementLabel:"T\xedtulo del h\xe9roe",elementType:"text",category:"hero",properties:as(o,"hero-title",{defaultValue:36,min:24,max:72,step:2})},children:(0,l.jsx)("h2",{className:"mt-4 text-3xl sm:text-4xl font-bold max-w-2xl leading-tight",style:i,children:s.platformName})}),(0,l.jsx)(e5,{elementConfig:{elementId:"hero-description",elementLabel:"Descripci\xf3n del h\xe9roe",elementType:"text",category:"hero",properties:as(o,"hero-description",{defaultValue:16,min:12,max:24,step:1})},children:(0,l.jsx)("p",{className:"mt-4 max-w-2xl text-base text-muted-foreground",style:c,children:t})}),(0,l.jsxs)("div",{className:"mt-6 flex flex-wrap gap-3",children:[(0,l.jsx)(e5,{elementConfig:{elementId:"hero-primary-button",elementLabel:"Bot\xf3n primario",elementType:"button",category:"button",properties:as(o,"hero-primary-button",{defaultValue:16,min:12,max:24,step:1})},children:(0,l.jsx)(y,{size:"lg",className:"px-6",style:d,children:s.primaryButtonLabel||"Ver cupones destacados"})}),(0,l.jsx)(e5,{elementConfig:{elementId:"hero-secondary-button",elementLabel:"Bot\xf3n secundario",elementType:"button",category:"button",properties:as(o,"hero-secondary-button",{defaultValue:16,min:12,max:24,step:1})},children:(0,l.jsx)(y,{variant:"outline",size:"lg",className:"px-6",style:u,onClick:r,children:s.secondaryButtonLabel||"Personalizar experiencia"})})]})]})]})}var an=s(3366);function ai(e){let{className:a,...s}=e;return(0,l.jsx)(an.bL,{"data-slot":"avatar",className:j("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...s})}function al(e){let{className:a,...s}=e;return(0,l.jsx)(an._V,{"data-slot":"avatar-image",className:j("aspect-square size-full",a),...s})}var ac=s(8210);function ad(e){let{coupon:a,business:s,isSaved:t=!1,isRedeemed:r=!1,onToggleSave:o,onRedeem:n,showActions:i=!0}=e,c=new Date(a.expiryDate),d=Math.ceil((c.getTime()-Date.now())/864e5),u=i?"cursor-pointer hover:shadow-xl":"cursor-default";return(0,l.jsx)(e$.P.div,{whileHover:{y:-4},transition:{duration:.2},children:(0,l.jsxs)(E,{className:"overflow-hidden group shadow-sm transition-shadow duration-200 ".concat(u),children:[(0,l.jsxs)("div",{className:"relative aspect-3/2 overflow-hidden bg-muted",children:[(0,l.jsx)("img",{src:a.image,alt:a.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),(0,l.jsxs)("div",{className:"absolute top-3 left-3 flex gap-2",children:[(0,l.jsxs)(_,{className:"bg-accent text-accent-foreground font-semibold shadow-lg",style:{fontSize:"var(--coupon-discount-font-size, 0.875rem)",color:"var(--coupon-discount-color, hsl(var(--accent-foreground)))",backgroundColor:"var(--coupon-discount-background, hsl(var(--accent)))"},children:[(0,l.jsx)(F.v,{className:"w-3 h-3 mr-1",weight:"fill"}),a.discount]}),a.isNew&&(0,l.jsx)(_,{variant:"secondary",className:"shadow-lg font-semibold",children:"NUEVO"}),r&&(0,l.jsx)(_,{variant:"outline",className:"bg-background/90 shadow-lg font-semibold",children:"USADO"})]}),i&&o&&(0,l.jsx)(y,{size:"icon",variant:"secondary",className:"absolute top-3 right-3 rounded-full shadow-lg",onClick:e=>{e.stopPropagation(),o()},children:(0,l.jsx)(ac.B,{className:"w-4 h-4",weight:t?"fill":"regular",color:t?"#f59e0b":"currentColor"})}),(0,l.jsx)("div",{className:"absolute bottom-3 left-3",children:(0,l.jsx)(ai,{className:"w-10 h-10 border-2 border-background shadow-lg",children:(0,l.jsx)(al,{src:s.logo,alt:s.name})})})]}),(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsx)("div",{className:"flex items-start justify-between gap-2 mb-2",children:(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("h3",{className:"font-semibold text-lg leading-tight mb-1 line-clamp-2",style:{fontSize:"var(--coupon-title-font-size, 1.125rem)",color:"var(--coupon-title-color, inherit)",fontFamily:"var(--coupon-title-font-family, inherit)",letterSpacing:"var(--coupon-title-letter-spacing, normal)",textDecoration:"var(--coupon-title-decoration, none)"},children:(0,l.jsx)("span",{className:"inline-block",style:{backgroundColor:"var(--coupon-title-background, transparent)",padding:"var(--coupon-title-background-padding, 0)",borderRadius:"var(--coupon-title-background-radius, 0)"},children:a.title})}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground font-medium",children:s.name})]})}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",style:{fontSize:"var(--coupon-description-font-size, 0.875rem)",color:"var(--coupon-description-color, inherit)",fontFamily:"var(--coupon-description-font-family, inherit)",letterSpacing:"var(--coupon-description-letter-spacing, normal)",textDecoration:"var(--coupon-description-decoration, none)"},children:(0,l.jsx)("span",{className:"inline-block",style:{backgroundColor:"var(--coupon-description-background, transparent)",padding:"var(--coupon-description-background-padding, 0)",borderRadius:"var(--coupon-description-background-radius, 0)"},children:a.description})}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,l.jsx)(G.z,{className:"w-3.5 h-3.5"}),(0,l.jsxs)("span",{className:d<=7&&d>0?"text-accent font-medium":"",children:["Vence ",c.toLocaleDateString("es-ES",{month:"short",day:"numeric"})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[i&&n&&(0,l.jsx)(y,{size:"sm",onClick:e=>{e.stopPropagation(),n()},disabled:r,children:r?"Canjeado":"Canjear"}),!i&&(0,l.jsxs)(y,{size:"sm",variant:"outline",onClick:e=>{e.stopPropagation();let s=encodeURIComponent(a.id);window.open("https://routicket.com/cupon/?id_cupon=".concat(s),"_blank","noopener,noreferrer")},className:"gap-1",children:[(0,l.jsx)("span",{children:"Ver en Routicket"}),(0,l.jsx)(J.B,{className:"w-3.5 h-3.5"})]})]})]})]})]})})}function au(e){let{coupon:a,business:s,showActions:t=!1}=e,{getCustomization:r}=h(),o={elementId:"coupon-".concat(a.id),elementLabel:"Cup\xf3n: ".concat(a.title),elementType:"coupon-card",category:"coupon",properties:[{id:"image",label:"Imagen del cup\xf3n",type:"image",value:r("coupon-".concat(a.id),"image",a.image)},{id:"borderRadius",label:"Redondez de bordes",type:"borderRadius",value:r("coupon-".concat(a.id),"borderRadius",12),min:0,max:24,step:2,unit:"px"},{id:"titleFontSize",label:"Tama\xf1o t\xedtulo",type:"fontSize",value:r("coupon-".concat(a.id),"titleFontSize",18),min:14,max:28,step:1,unit:"px"},{id:"titleColor",label:"Color t\xedtulo",type:"color",value:r("coupon-".concat(a.id),"titleColor","")},{id:"titleFontFamily",label:"Tipograf\xeda t\xedtulo",type:"select",value:r("coupon-".concat(a.id),"titleFontFamily",e7),options:ae},{id:"titleLetterSpacing",label:"Espaciado t\xedtulo",type:"number",value:r("coupon-".concat(a.id),"titleLetterSpacing",0),min:e9.min,max:e9.max,step:e9.step,unit:"px"},{id:"titleBackground",label:"Fondo t\xedtulo",type:"color",value:r("coupon-".concat(a.id),"titleBackground","")},{id:"titleDecoration",label:"Decoraci\xf3n t\xedtulo",type:"select",value:r("coupon-".concat(a.id),"titleDecoration","none"),options:aa},{id:"descriptionFontSize",label:"Tama\xf1o descripci\xf3n",type:"fontSize",value:r("coupon-".concat(a.id),"descriptionFontSize",14),min:12,max:18,step:1,unit:"px"},{id:"descriptionColor",label:"Color descripci\xf3n",type:"color",value:r("coupon-".concat(a.id),"descriptionColor","")},{id:"descriptionFontFamily",label:"Tipograf\xeda descripci\xf3n",type:"select",value:r("coupon-".concat(a.id),"descriptionFontFamily",e7),options:ae},{id:"descriptionLetterSpacing",label:"Espaciado descripci\xf3n",type:"number",value:r("coupon-".concat(a.id),"descriptionLetterSpacing",0),min:e9.min,max:e9.max,step:e9.step,unit:"px"},{id:"descriptionBackground",label:"Fondo descripci\xf3n",type:"color",value:r("coupon-".concat(a.id),"descriptionBackground","")},{id:"descriptionDecoration",label:"Decoraci\xf3n descripci\xf3n",type:"select",value:r("coupon-".concat(a.id),"descriptionDecoration","none"),options:aa},{id:"discountFontSize",label:"Tama\xf1o descuento",type:"fontSize",value:r("coupon-".concat(a.id),"discountFontSize",14),min:12,max:20,step:1,unit:"px"},{id:"discountColor",label:"Color texto descuento",type:"color",value:r("coupon-".concat(a.id),"discountColor","")},{id:"discountBackground",label:"Fondo etiqueta descuento",type:"color",value:r("coupon-".concat(a.id),"discountBackground","")}]},n="coupon-".concat(a.id),i={...a,image:r(n,"image",a.image)},c=r(n,"borderRadius",12),d=r(n,"titleFontSize",18),u=r(n,"titleColor",""),m=r(n,"titleFontFamily",e7),p=r(n,"titleLetterSpacing",0),x=r(n,"titleBackground",""),g=r(n,"titleDecoration","none"),f=r(n,"descriptionFontSize",14),b=r(n,"descriptionColor",""),v=r(n,"descriptionFontFamily",e7),j=r(n,"descriptionLetterSpacing",0),N=r(n,"descriptionBackground",""),y=r(n,"descriptionDecoration","none"),w=r(n,"discountFontSize",14),C=r(n,"discountColor",""),k=r(n,"discountBackground",""),z={"--coupon-title-font-size":"".concat(d,"px"),"--coupon-description-font-size":"".concat(f,"px"),"--coupon-discount-font-size":"".concat(w,"px"),"--coupon-title-letter-spacing":"".concat(p,"px"),"--coupon-description-letter-spacing":"".concat(j,"px"),"--coupon-title-decoration":g,"--coupon-description-decoration":y,"--coupon-title-font-family":m,"--coupon-description-font-family":v};u&&(z["--coupon-title-color"]=u),x&&(z["--coupon-title-background"]=x,z["--coupon-title-background-padding"]="0.1em 0.35em",z["--coupon-title-background-radius"]="0.35rem"),b&&(z["--coupon-description-color"]=b),N&&(z["--coupon-description-background"]=N,z["--coupon-description-background-padding"]="0.05em 0.25em",z["--coupon-description-background-radius"]="0.35rem"),C&&(z["--coupon-discount-color"]=C),k&&(z["--coupon-discount-background"]=k);let S={borderRadius:"".concat(c,"px"),...z};return(0,l.jsx)(e5,{elementConfig:o,children:(0,l.jsx)("div",{style:S,children:(0,l.jsx)(ad,{coupon:i,business:s,showActions:t})})})}function am(e){let{businessName:a,fallbackPlatformName:s,businessCoupons:t,effectiveBusiness:r,isLoading:o}=e,{getCustomization:n}=h(),i=at(n,"section-title",{fontSize:24,color:"#111827"}),c=at(n,"section-description",{fontSize:16,color:"#6b7280"}),d={elementId:"section-title",elementLabel:"T\xedtulo de secci\xf3n",elementType:"text",category:"text",properties:as(n,"section-title",{defaultValue:24,min:16,max:48,step:2},"#111827")},u={elementId:"section-description",elementLabel:"Descripci\xf3n de secci\xf3n",elementType:"text",category:"text",properties:as(n,"section-description",{defaultValue:16,min:12,max:24,step:1},"#6b7280")};return(0,l.jsxs)("section",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(e5,{elementConfig:d,children:(0,l.jsx)("h3",{className:"text-2xl font-semibold",style:i,children:"Promociones de ".concat(a||s)})}),(0,l.jsx)(e5,{elementConfig:u,children:(0,l.jsx)("p",{className:"text-muted-foreground",style:c,children:"Comparte estas ofertas con tu comunidad y aumenta tus canjes digitales."})})]}),o?(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6",children:Array.from({length:3}).map((e,a)=>(0,l.jsx)("div",{className:"rounded-xl border bg-muted/40 h-64 animate-pulse"},a))}):(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6",children:t.map(e=>(0,l.jsx)(au,{coupon:e,business:r,showActions:!1},e.id))})]})}var ap=s(5704);let ax=null!=(r=ap.env.NEXT_PUBLIC_API_PUBLIC_KEY)?r:"demo-public-key",ah=null!=(o=ap.env.NEXT_PUBLIC_API_SECRET_KEY)?o:"demo-secret-key",ag=null!=(n=ap.env.NEXT_PUBLIC_USER_ID)?n:"demo-user",af=Number.parseInt(null!=(i=ap.env.NEXT_PUBLIC_PARTNER_ID)?i:"",10),ab=Number.isNaN(af)?1427:af,av="true"===ap.env.NEXT_PUBLIC_USE_DEMO_DATA;function aj(e){if(!e)return new Date().toISOString();let a=new Date(e);return Number.isNaN(a.getTime())?new Date().toISOString():a.toISOString()}function aN(){var e;let[a,s]=(0,c.useState)("customer"),[t,r]=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[a,s]=(0,c.useState)(e);return(0,c.useEffect)(()=>{!async function(){try{let e=await fetch("/api/brand-configs");if(e.ok){let a=await e.json();if(a.configs&&Object.keys(a.configs).length>0)return void s(a.configs)}}catch(e){console.error("Failed to load brand configs from server:",e)}let e=(e=>{if(e)try{return JSON.parse(e)}catch(e){return}})(window.localStorage.getItem(eZ));e&&s(e)}()},[]),[a,(0,c.useCallback)(e=>{s(a=>{let s="function"==typeof e?e(a):e;try{window.localStorage.setItem(eZ,JSON.stringify(s))}catch(e){}return fetch("/api/brand-configs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({configs:s})}).catch(e=>{console.error("Failed to save brand configs to server:",e)}),s})},[])]}({}),{data:o,isLoading:n,error:i,refresh:d,partnerCoupons:u}=function(e){let{apiPublicKey:a,apiSecret:s,userId:t,partnerId:r,useDemoData:o}=e,[n,i]=(0,c.useState)(null),[l,d]=(0,c.useState)(!1),[u,m]=(0,c.useState)(null),p=(0,c.useRef)(null),x=(0,c.useCallback)(async e=>{d(!0);try{let n=await e0({apiPublicKey:a,apiSecret:s,userId:t,partnerId:r,signal:e,useDemoData:o});i(n),m(null)}catch(e){if("AbortError"===e.name)return;m(e.message||"No fue posible obtener la informaci\xf3n de Routicket.")}finally{e&&e.aborted||d(!1)}},[a,s,t,r,o]);(0,c.useEffect)(()=>{var e;null==(e=p.current)||e.abort();let a=new AbortController;return p.current=a,x(a.signal),()=>a.abort()},[x]);let h=(0,c.useCallback)(()=>{var e;null==(e=p.current)||e.abort();let a=new AbortController;p.current=a,x(a.signal)},[x]),g=(0,c.useMemo)(()=>n?null==r?n.cupones:n.cupones.filter(e=>Number(e.id_partner)===Number(r)):[],[n,r]);return{data:n,isLoading:l,error:u,refresh:h,partnerCoupons:g}}({apiPublicKey:ax,apiSecret:ah,userId:ag,partnerId:ab,useDemoData:av}),m=(0,c.useMemo)(()=>{var e,a;let s=u[0];if(s)return{id:"partner-".concat(ab),name:(null==(e=s.text)?void 0:e.trim())||s.titulo||"Partner ".concat(ab),logo:s.foto_post||s.foto||"https://routicket.com/favicon.ico",category:"services",description:(null==o||null==(a=o.api_usage)?void 0:a.note)||"Ofertas sincronizadas autom\xe1ticamente desde Routicket.",address:"No disponible",hours:"Sin horario disponible",phone:"No disponible",coverImage:s.foto||s.foto_post||"https://routicket.com/favicon.ico"}},[u,null==o||null==(e=o.api_usage)?void 0:e.note]),p=(0,c.useMemo)(()=>m?u.map(e=>{var a;return{id:String(e.id),businessId:m.id,title:e.titulo,description:e.descripcion||e.condiciones||"Promoci\xf3n disponible",discount:e.text||"Cup\xf3n digital",image:e.foto||e.foto_post||m.coverImage,terms:e.condiciones||"",expiryDate:aj(e.fecha_final),category:m.category,redemptionCode:String(null!=(a=e.code)?a:e.id),isNew:!!(1===e.status&&e.vistosx<50),isActive:1===e.status,maxRedemptions:void 0,currentRedemptions:e.usado,createdAt:aj(e.fecha_create)}}):[],[m,u]),x=(0,c.useMemo)(()=>(function(e){if(e&&Object.keys(e).length>0){let[a]=Object.keys(e);return e[a]}return eC})(t),[t]);(0,c.useEffect)(()=>{ek(x)},[x]);let h=(0,c.useMemo)(()=>({id:"placeholder-business",name:x.platformName,logo:x.logoUrl||"https://routicket.com/favicon.ico",category:"services",description:x.tagline||"Personaliza tu cuponera digital y sincroniza tus promociones en tiempo real.",address:"No disponible",hours:"Sin horario disponible",phone:"No disponible",coverImage:x.heroImageUrl||x.logoUrl||"https://routicket.com/favicon.ico"}),[x.platformName,x.logoUrl,x.tagline,x.heroImageUrl]),g=(0,c.useMemo)(()=>{if(!m)return!1;let e=x.businessId;return!e||e===m.id},[x.businessId,m]),f=g&&m||h,b=(0,c.useMemo)(()=>g&&p.length>0?p:e4,[g,p]),v=b===e4?e1:f;if("business"===a)return(0,l.jsx)(eT,{onBackToCustomer:()=>s("customer"),brandConfigs:t||{},onBrandConfigUpdate:r,apiData:o,partnerId:ab,isLoading:n,error:i,onRefresh:d});let j=x.backgroundColor?{backgroundColor:x.backgroundColor}:void 0,N=x.tagline||(g&&m?"Explora promociones exclusivas de ".concat(m.name,"."):"Explora ofertas exclusivas de negocios locales en tu comunidad.");return(0,l.jsxs)("div",{className:"min-h-screen",style:j,children:[(0,l.jsx)(eK,{}),(0,l.jsx)(ar,{brandConfig:x,tagline:N,onSwitchToDashboard:()=>s("business")}),(0,l.jsxs)("main",{className:"container mx-auto px-6 py-10 space-y-10",children:[(0,l.jsx)(ao,{displayBusiness:f,brandConfig:x,tagline:N,onOpenDashboard:()=>s("business")}),(0,l.jsx)(am,{businessName:null==f?void 0:f.name,fallbackPlatformName:x.platformName,businessCoupons:b,effectiveBusiness:v,isLoading:n})]}),(0,l.jsx)("footer",{className:"border-t mt-16",children:(0,l.jsxs)("div",{className:"container mx-auto px-6 py-8 text-center text-sm text-muted-foreground space-y-2",children:[(0,l.jsxs)("p",{children:[x.platformName," — experiencias de cupones listas para tu marca."]}),(0,l.jsx)("p",{children:"Personaliza colores, im\xe1genes y mensajes para lanzar tu propio cuaderno de cupones digitales."})]})})]})}let ay=function(){return(0,l.jsx)(x,{children:(0,l.jsx)(aN,{})})};var aw=s(8992),aC=s(2056),ak=s(9559);let az=e=>{let{error:a,resetErrorBoundary:s}=e;return(0,l.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"w-full max-w-md",children:[(0,l.jsxs)(eA,{variant:"destructive",className:"mb-6",children:[(0,l.jsx)(aC.A,{}),(0,l.jsx)(eF,{children:"This spark has encountered a runtime error"}),(0,l.jsx)(eR,{children:"Something unexpected happened while running the application. The error details are shown below. Contact the spark author and let them know about this issue."})]}),(0,l.jsxs)("div",{className:"bg-card border rounded-lg p-4 mb-6",children:[(0,l.jsx)("h3",{className:"font-semibold text-sm text-muted-foreground mb-2",children:"Error Details:"}),(0,l.jsx)("pre",{className:"text-xs text-destructive bg-muted/50 p-3 rounded border overflow-auto max-h-32",children:a.message})]}),(0,l.jsxs)(y,{onClick:s,className:"w-full",variant:"outline",children:[(0,l.jsx)(ak.A,{}),"Try Again"]})]})})};function aS(){return(0,l.jsx)(aw.tH,{FallbackComponent:az,children:(0,l.jsx)(ay,{})})}},6939:(e,a,s)=>{Promise.resolve().then(s.bind(s,5152))}},e=>{e.O(0,[649,441,255,358],()=>e(e.s=6939)),_N_E=e.O()}]);